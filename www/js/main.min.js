/*
 * LottoLottoLotto - r0.1.0
 * 2015-09-10 */

"undefined"==typeof lotto&&(lotto={global:{}}),lotto.global.init=function(){"use strict";function a(){$.getJSON("/data/lottery.json",function(a){i=a})}function b(a){for(var b,c,d=a.length;d>0;)c=Math.floor(Math.random()*d),d--,b=a[d],a[d]=a[c],a[c]=b;return a}function c(a){var c,d=1e3,e=0;for(m=!1,c=$(this).length?$(this).attr("data-type"):$(a).attr("data-type"),h.clear(),e;d>e;e++){var f,g=i[e].winning_numbers.split(" "),k=[];f=20*e;for(var l=0;6>l;l++){var n=5*parseInt(g[l]);k.push(n)}k=b(k),setTimeout(function(){j[c](k,f)},100)}}function d(){m=!0,h.clear(),$(".options input").removeAttr("checked")}function e(){var a=$(".options input:checked");m=!0,h.clear(),a.length>0&&c(a)}function f(){m=!0}function g(){$(".options input").on("change",c),$(".clear").on("click",d),$(".reset").on("click",e),$(".stop").on("click",f)}var h,i,j,k,l=0,m=!1;j={drawLines:function(a,b){k=setTimeout(function(){var b;return m?!1:(b=new fabric.Polyline([{x:a[0],y:a[1]},{x:a[2]+100,y:a[3]+100},{x:a[4]+200,y:a[5]+200}],{fill:"transparent",stroke:"red",strokeWidth:1}),void h.add(b))},0)},drawCircle:function(a,b){setTimeout(function(){var b;return m?!1:(b=new fabric.Circle({radius:a[0]/3,fill:"red",left:a[1],top:a[2],opacity:a[3]/1e3}),void h.add(b))},b)},drawTinyCircles:function(a,b){var c=["red","blue","yellow"];setTimeout(function(){var b;return m?!1:(b=new fabric.Circle({radius:10,fill:c[l],left:a[1]+a[1]/2,top:a[2]+a[2]/2,opacity:a[3]/600}),l++,3===l&&(l=0),void h.add(b))},0)},drawPath:function(a,b){var c="M"+a[0]+" "+a[1]+" Q"+a[2]+" "+a[3]+" "+a[4]+" "+a[5];setTimeout(function(a){var b;b=new fabric.Path(c),b.set({fill:"transparent",stroke:"red",left:0,top:0}),h.add(b)},b)}},$(document).ready(function(){h=new fabric.StaticCanvas("lotto-art"),fabric.Image.fromURL("../images/text.jpg",function(a){a.set({left:100,top:100,opacity:0}),h.add(a),a.animate("opacity",1,{onChange:h.renderAll.bind(h),duration:600})}),a(),g()})}();